{% if site.customConfig.live2d %}
  <!-------------------- live2dåŠŸèƒ½ğŸ‘‡ --------------------------->
  <script type="module" src="https://fastly.jsdelivr.net/npm/wl-live2d@1.0.6/dist/es/index.min.js"></script>
  <!-------------------- live2dåŠŸèƒ½ğŸ‘† --------------------------->
{% endif %}
{% if site.customConfig.aplayerChoice %}
  <!-- aplayeræ’­æ”¾å™¨åŠ è½½ğŸ‘‡ -->
  <div class="wl-fixed wl-inset-x-0 wl-bottom-0 wl-z-20 wl-m-0 wl-bg-white">
    <meting-js id="3779629" server="netease" type="playlist" order="list" loop="all" preload="auto" autoplay="false" fixed="true" mini="true" muted="muted">
    </meting-js>
  </div>
  <script src="https://fastly.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <!-- require MetingJS -->
  <script src="https://fastly.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script>
  <!-- aplayeræ’­æ”¾å™¨åŠ è½½ğŸ‘† -->
{% endif %}
<script>
  // å…¬å…±éƒ¨åˆ†
  let common = [
    {% if site.customConfig.postNumChoice %}
      SitePost.getHot.bind(null, '{{ site.customConfig.postNumUrl }}'),
    {% endif %}
    {% if site.customConfig.siteNumChoice %}
      {# TODO: è®¿å®¢æ•°é‡ç»Ÿè®¡çš„ URL #}
      SitePost.updateTotalView.bind(null, '{{ site.customConfig.siteNumUrl }}'),
    {% endif %}
    {% if site.customConfig.siteGoTimeChoice %}
      Utils.updateSiteTime.bind(null, '{{ site.customConfig.siteGoTime }}'),
    {% endif %}
  ];
  JQG.add(
    SitePost.initValue.bind(null, true, 'twikoo', ''),
    Utils.one.bind(null),
    ...common,
    Utils.loadOhLive2D.bind(null, {
      "mobileShow": true,
      "source": "{{ themeConfig.domain }}",
      "sayHello": true,
      "selector": null,
      "transitionTime": 1500,
      "models": [
        {
          "path": "{{ themeConfig.domain }}/media/live2d/mei/model.json",
          "position": { "x": 0, "y": 0 },
          "scale": 0.5,
          "backgroundColor":
            "#00000000",
        },
        {
          "path": "{{ themeConfig.domain }}/media/live2d/Violet/14.json",
          "position": { "x": 0, "y": 0 },
          "scale": 0.5,
          "backgroundColor": "#00000000",
        },
      ],
      "tips": {
        "offsetX": 0,
        "offsetY": 0,
        "message": [
          { "text": "å¥½ä¹…ä¸è§ï¼Œæ—¥å­è¿‡å¾—å¥½å¿«å‘¢â€¦â€¦" },
          { "text": "å¤§åè›‹ï¼ä½ éƒ½å¤šä¹…æ²¡ç†äººå®¶äº†å‘€ï¼Œå˜¤å˜¤å˜¤ï½" },
          { "text": "å—¨ï½å¿«æ¥é€—æˆ‘ç©å§ï¼" },
          { "text": "æ‹¿å°æ‹³æ‹³é”¤ä½ èƒ¸å£ï¼" },
          { "text": "è®°å¾—æŠŠå°å®¶åŠ å…¥æ”¶è—å¤¹å“¦ï¼" },
          { "text": "äº†è§£çœŸç›¸ï¼Œæ‰èƒ½è·å¾—çœŸæ­£çš„è‡ªç”±~" },
          { "text": "æœ€è¿‘åœ¨çœ‹ä»€ä¹ˆä¹¦å‘¢ï¼Ÿ" },
          { "text": "æœ€è¿‘åœ¨ç©ä»€ä¹ˆæ¸¸æˆå‘¢ï¼Ÿ" },
          { "text": "ä»Šå¤©å­¦ä¹ äº†å—ï¼Ÿ" },
          {
            "type": "seasons", "date": "01/01", "text": "<span>å…ƒæ—¦</span>äº†å‘¢ï¼Œæ–°çš„ä¸€å¹´åˆå¼€å§‹äº†ï¼Œä»Šå¹´æ˜¯{year}å¹´ï½",
          },
          {
            "type": "seasons",
            "date": "02/14",
            "text": "åˆæ˜¯ä¸€å¹´<span>æƒ…äººèŠ‚</span>ï¼Œ{year}å¹´æ‰¾åˆ°å¯¹è±¡äº†å˜›ï½",
          },
          { "type": "seasons", "date": "03/08", "text": "ä»Šå¤©æ˜¯<span>å›½é™…å¦‡å¥³èŠ‚</span>ï¼" },
          { "type": "seasons", "date": "03/12", "text": "ä»Šå¤©æ˜¯<span>æ¤æ ‘èŠ‚</span>ï¼Œè¦ä¿æŠ¤ç¯å¢ƒå‘€ï¼" },
          { "type": "seasons", "date": "04/01", "text": "æ‚„æ‚„å‘Šè¯‰ä½ ä¸€ä¸ªç§˜å¯†ï½<span>ä»Šå¤©æ˜¯æ„šäººèŠ‚ï¼Œä¸è¦è¢«éª—äº†å“¦ï½</span>" },
          { "type": "seasons", "date": "05/01", "text": "ä»Šå¤©æ˜¯<span>äº”ä¸€åŠ³åŠ¨èŠ‚</span>ï¼Œè®¡åˆ’å¥½å‡æœŸå»å“ªé‡Œäº†å—ï½" },
          {
            "type": "seasons", "date": "06/01", "text": "<span>å„¿ç«¥èŠ‚</span>äº†å‘¢ï¼Œå¿«æ´»çš„æ—¶å…‰æ€»æ˜¯çŸ­æš‚ï¼Œè¦æ˜¯æ°¸è¿œé•¿ä¸å¤§è¯¥å¤šå¥½å•Šâ€¦",
          }, {
            "type": "seasons", "date": "09/03", "text": "<span>ä¸­å›½äººæ°‘æŠ—æ—¥æˆ˜äº‰èƒœåˆ©çºªå¿µæ—¥</span>ï¼Œé“­è®°å†å²ã€ç¼…æ€€å…ˆçƒˆã€ççˆ±å’Œå¹³ã€å¼€åˆ›æœªæ¥ã€‚",
          },
          { "type": "seasons", "date": "09/10", "text": "<span>æ•™å¸ˆèŠ‚</span>ï¼Œåœ¨å­¦æ ¡è¦ç»™è€å¸ˆé—®å£°å¥½å‘€ï½" }, {
            "type": "seasons", "date": "10/01", "text": "<span>å›½åº†èŠ‚</span>åˆ°äº†ï¼Œä¸ºç¥–å›½æ¯äº²åº†ç”Ÿï¼",
          }, { "type": "seasons", "date": "11/05-11/12", "text": "ä»Šå¹´çš„<span>åŒåä¸€</span>æ˜¯å’Œè°ä¸€èµ·è¿‡çš„å‘¢ï½" }, {
            "type": "seasons", "date": "12/20-12/31", "text": "è¿™å‡ å¤©æ˜¯<span>åœ£è¯èŠ‚</span>ï¼Œä¸»äººè‚¯å®šåˆå»å‰æ‰‹ä¹°ä¹°ä¹°äº†ï½",
          }, { "type": "hour", "hour": "6-7", "text": "æ—©ä¸Šå¥½ï¼ä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨ï¼Œç¾å¥½çš„ä¸€å¤©å°±è¦å¼€å§‹äº†ï½" }, {
            "type": "hour", "hour": "8-11", "text": "ä¸Šåˆå¥½ï¼å·¥ä½œé¡ºåˆ©å˜›ï¼Œä¸è¦ä¹…åï¼Œå¤šèµ·æ¥èµ°åŠ¨èµ°åŠ¨å“¦ï¼",
          }, { "type": "hour", "hour": "12-13", "text": "ä¸­åˆäº†ï¼Œå·¥ä½œäº†ä¸€ä¸ªä¸Šåˆï¼Œç°åœ¨æ˜¯åˆé¤æ—¶é—´ï¼" }, {
            "type": "hour", "hour": "14-17", "text": ["åˆåå¾ˆå®¹æ˜“çŠ¯å›°å‘¢ï¼Œä»Šå¤©çš„è¿åŠ¨ç›®æ ‡å®Œæˆäº†å—ï¼Ÿ", "åˆåå¾ˆå®¹æ˜“çŠ¯å›°å‘¢ï¼Œæ¥æ¯å’–å•¡å§~"],
          }, { "type": "hour", "hour": "18-19", "text": ["å‚æ™šäº†ï¼çª—å¤–å¤•é˜³çš„æ™¯è‰²å¾ˆç¾ä¸½å‘¢ï¼Œæœ€ç¾ä¸è¿‡å¤•é˜³çº¢ï½", "å‚æ™šäº†ï¼å·¥ä½œä¸€å¤©å¹¸è‹¦å•¦~"] }, {
            "type": "hour", "hour": "20-21", "text": "æ™šä¸Šå¥½ï¼Œä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ",
          }, { "type": "hour", "hour": "22-23", "text": ["å·²ç»è¿™ä¹ˆæ™šäº†å‘€ï¼Œæ—©ç‚¹ä¼‘æ¯å§ï¼Œæ™šå®‰ï½", "æ·±å¤œæ—¶è¦çˆ±æŠ¤çœ¼ç›å‘€ï¼"] }, {
            "type": "hour", "hour": "0-4", "text": "è¿™ä¹ˆæ™šè¿˜ä¸ç¡å—ï¼Ÿå½“å¿ƒç†¬å¤œç§ƒå¤´å“¦ï¼",
          }, { "type": "hour", "hour": "0-5", "text": "ä½ æ˜¯å¤œçŒ«å­å‘€ï¼Ÿè¿™ä¹ˆæ™šè¿˜ä¸ç¡è§‰ï¼Œæ˜å¤©èµ·çš„æ¥å˜›ï¼Ÿ" }, {
            "type": "event", "event": "console", "text": "å“ˆå“ˆï¼Œä½ æ‰“å¼€äº†æ§åˆ¶å°ï¼Œæ˜¯æƒ³è¦çœ‹çœ‹æˆ‘çš„å°ç§˜å¯†å—ï¼Ÿ",
          }, {
            "type": "event", "event": "copy", "text": ["å¤åˆ¶çš„å†…å®¹å¦‚æœéœ€è¦è½¬è½½è®°å¾—æ³¨æ˜å‡ºå¤„å“¦~", "ä½ éƒ½å¤åˆ¶äº†äº›ä»€ä¹ˆå‘€ï¼Œè½¬è½½è¦è®°å¾—åŠ ä¸Šå‡ºå¤„å“¦~~"],
          }, { "type": "event", "event": "visibilitychange", "text": "å“‡ï¼Œä½ ç»ˆäºå›æ¥äº†ï½" },
        ],
        "motionMessage": false,
      },
    }),
    SiteMenu.init.bind(null, '{{ site.customConfig.menuPosition }}', {
      {% for icon in site.customConfig.icons %}"{{ icon.menuName }}":"{{ icon.iconUrl }}",{% endfor %}
    }),
  );
  JQG.addPjax(
    ...common,
    Utils.update.bind(null),
  );
</script>
